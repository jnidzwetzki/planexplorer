(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{131:e=>{e.exports={sqlBox:"SqlQueryInput_sqlBox__aXeGu",sqlLabel:"SqlQueryInput_sqlLabel__jEOgL",sqlTextarea:"SqlQueryInput_sqlTextarea__FNuM_",sqlHint:"SqlQueryInput_sqlHint__TQLcQ",sqlPlaceholderBtn:"SqlQueryInput_sqlPlaceholderBtn__iM5CO"}},2789:e=>{e.exports={selectorRow:"DatabaseSelector_selectorRow__2xj6A",selectorRowInner:"DatabaseSelector_selectorRowInner__SgM8G",selectorLabel:"DatabaseSelector_selectorLabel__xa_gL",selectorSelect:"DatabaseSelector_selectorSelect__VZ5g3",inputProxyUrl:"DatabaseSelector_inputProxyUrl__sJttg",buttonTestRow:"DatabaseSelector_buttonTestRow__YBFYQ",selectorBox:"DatabaseSelector_selectorBox__aDp06",dimensionLegend:"DatabaseSelector_dimensionLegend__KvjjH",buttonTest:"DatabaseSelector_buttonTest__nGHyY",testStatusBox:"DatabaseSelector_testStatusBox__29of9",testStatusSuccess:"DatabaseSelector_testStatusSuccess__gWbBL",testStatusError:"DatabaseSelector_testStatusError__5kmME"}},2836:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var a=n(5155),s=n(2115),r=n(6677),l=n.n(r);function i(e){let{label:t,start:n,end:r,setStart:i,setEnd:o,startValid:c,setStartValid:u,endValid:p,setEndValid:d,step:m,setStep:_,description:g,setDescription:h,onRemove:x}=e,[S,y]=s.useState(n.toString()),[b,N]=s.useState(r.toString()),[f,j]=s.useState(m.toString()),[v,E]=s.useState(!0),[R,C]=s.useState(g);s.useEffect(()=>{y(n.toString())},[n]),s.useEffect(()=>{N(r.toString())},[r]),s.useEffect(()=>{j(m.toString())},[m]),s.useEffect(()=>{C(g)},[g]);let L=e=>""!==e&&"-"!==e&&/^-?\d+$/.test(e),I=e=>""!==e&&/^\d*\.?\d+$/.test(e)&&Number(e)>0,F=(e,t)=>!(L(e)&&L(t))||Number(t)>Number(e);return(0,a.jsxs)("fieldset",{className:l().dimensionGroup,children:[(0,a.jsxs)("legend",{className:l().dimensionLegend,children:[t,"Dimension 1"===t&&x&&(0,a.jsx)("button",{type:"button",className:l().removeButton,title:"Remove Dimension 1",onClick:x,"aria-label":"Remove Dimension 1",children:"\xd7"})]}),(0,a.jsxs)("div",{className:l().intervalRow,children:[(0,a.jsxs)("label",{className:l().inputLabel,children:[(0,a.jsx)("span",{children:"Start"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:S,onChange:e=>{let t=e.target.value;y(t);let n=L(t);u(n),n&&L(b)&&d(L(b)&&F(t,b)),n&&i(Number(t))},className:c?l().inputField:"".concat(l().inputField," ").concat(l().inputFieldInvalid)})]}),(0,a.jsxs)("label",{className:l().inputLabel,children:[(0,a.jsx)("span",{children:"End"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:b,onChange:e=>{let t=e.target.value;N(t);let n=L(t)&&F(S,t);d(n),L(S)&&u(L(S)),n&&o(Number(t))},className:p?l().inputField:"".concat(l().inputField," ").concat(l().inputFieldInvalid)})]}),(0,a.jsxs)("label",{className:l().inputLabel,children:[(0,a.jsx)("span",{children:"Step"}),(0,a.jsx)("input",{type:"text",inputMode:"numeric",value:f,onChange:e=>{let t=e.target.value;j(t);let n=I(t);E(n),n&&_(Number(t))},className:v?l().inputField:"".concat(l().inputField," ").concat(l().inputFieldInvalid),min:1})]}),(0,a.jsxs)("label",{className:l().inputLabel,style:{marginLeft:8},children:[(0,a.jsx)("span",{children:"Description"}),(0,a.jsx)("input",{type:"text",value:R,onChange:e=>{let t=e.target.value;C(t),h(t)},className:l().inputField})]})]})]})}var o=n(131),c=n.n(o);let u="SET enable_seqscan = on;\nSET cpu_index_tuple_cost = 0.0005;\nDROP TABLE IF EXISTS data;\nCREATE TABLE data(key integer, value text);\nINSERT INTO data (key, value) SELECT i, i::text FROM generate_series(1, 100000) i;\nCREATE INDEX ON data(key);\nANALYZE data;",p="SELECT * FROM data WHERE key > %%DIMENSION0%%;";function d(e){let{value:t,onChange:n,dim1Active:r,preparationValue:l,onPreparationChange:i}=e,o=(0,s.useRef)(null),u=e=>{let a=o.current;if(!a)return;let s=a.selectionStart,r=a.selectionEnd;n(t.slice(0,s)+e+t.slice(r)),setTimeout(()=>{a.focus(),a.selectionStart=a.selectionEnd=s+e.length},0)};return(0,a.jsxs)("div",{className:c().sqlBox,children:[(0,a.jsx)("label",{htmlFor:"preparation-steps",className:c().sqlLabel,children:"Preparation Steps"}),(0,a.jsx)("textarea",{id:"preparation-steps",value:l,onChange:e=>i(e.target.value),rows:7,className:c().sqlTextarea,placeholder:"Describe any preparation steps here..."}),(0,a.jsx)("label",{htmlFor:"sql-query",className:c().sqlLabel,children:"SQL Query"}),(0,a.jsx)("textarea",{id:"sql-query",ref:o,value:t,onChange:e=>n(e.target.value),rows:3,className:c().sqlTextarea,placeholder:"Enter your SQL query here..."}),(0,a.jsxs)("div",{className:c().sqlHint,children:["You can use the placeholder"," ",(0,a.jsx)("button",{type:"button",className:c().sqlPlaceholderBtn,onClick:()=>u("%%DIMENSION0%%"),children:"%%DIMENSION0%%"}),r&&(0,a.jsxs)(a.Fragment,{children:[" ","and"," ",(0,a.jsx)("button",{type:"button",className:c().sqlPlaceholderBtn,onClick:()=>u("%%DIMENSION1%%"),children:"%%DIMENSION1%%"})]})," ","in your query."]})]})}var m=n(3876),_=n.n(m),g=n(5028),h=n(9967);let x=new Map,S=new Map,y=1;function b(){x.clear(),S.clear(),y=1}function N(e,t,n){var a;let s,r=(a=function(e){let t=[];return Array.isArray(e)&&e.length>0&&e[0].Plan&&function e(t,n){if(!t||"object"!=typeof t)return;let a="string"==typeof t["Node Type"]?t["Node Type"]:void 0,s="string"==typeof t.Alias?t.Alias:void 0,r="string"==typeof t["Relation Name"]?t["Relation Name"]:void 0;if(a){let e=a;(s||r)&&(e+="(",s?e+=s:r&&(e+=r),e+=")"),n.push(e)}for(let a in t){let s=t[a];Array.isArray(s)?s.forEach(t=>e(t,n)):"object"==typeof s&&null!==s&&e(s,n)}}(e[0].Plan,t),t.join(">")}(e),x.has(a)?s=x.get(a):(s=y++,x.set(a,s),S.set(s,"string"==typeof e?e:JSON.stringify(e,null,2))),s);t&&(n[t]=r)}function f(e){return e.split(";").map(e=>e.trim()).filter(Boolean)}function j(e){return e.trim().toUpperCase().startsWith("SELECT")}function v(e){if(!(e>100))return{sampleIndices:void 0,sampled:!1,sampleCount:e};{let t=new Set;for(let n=0;n<100;n++)t.add(Math.floor(n*e/100));return{sampleIndices:t,sampled:!0,sampleCount:100}}}async function E(e,t){let n,a=[];for(let s of f(e))try{let{ok:e,data:r}=await t(s);e?a.push("".concat(s,";\nResult: ").concat(JSON.stringify(r,null,2))):(n||(n="".concat(s,";\nError: ").concat(r.error)),a.push("".concat(s,";\nError: ").concat(r.error)))}catch(e){n||(n="".concat(s,";\nError: ").concat(e instanceof Error?e.message:String(e))),a.push("".concat(s,";\nError: ").concat(e instanceof Error?e.message:String(e)))}return{results:a,firstError:n}}function R(e,t,n,a,s,r,l){let i=0;if(e)for(let e=t;e<=n+1e-8;e+=a)for(let e=s;e<=r+1e-8;e+=l)i++;else for(let e=t;e<=n+1e-8;e+=a)i++;return i}function C(e,t,n){return e.replaceAll("%%DIMENSION0%%",t).replaceAll("%%DIMENSION1%%",n)}async function L(e){let{dim1Active:t,start0:n,end0:a,step0:s,start1:r,end1:l,step1:i,sqlQuery:o,callback:c,onProgress:u,totalExecutions:p}=e,d=0;if(t)for(let e=n;e<=a+1e-8;e+=s){let t=Number(e.toFixed(8));for(let e=r;e<=l+1e-8;e+=i){let n=Number(e.toFixed(8)),a=C(o,t.toString(),n.toString()),s="".concat(t,",").concat(n);await c({sql:a,combinationKey:s,iFixed:t,jFixed:n,executionIndex:d}),u&&u(d+1,p),d++}}else for(let e=n;e<=a+1e-8;e+=s){let t=Number(e.toFixed(8)),n=C(o,t.toString(),""),a="".concat(t,",0");await c({sql:n,combinationKey:a,iFixed:t,jFixed:0,executionIndex:d}),u&&u(d+1,p),d++}}async function I(e){let{sql:t,combinationKey:n,sampleIndices:a,executionIndex:s,planFingerprintByCombination:r,proxyUrl:l,handleExplainResult:i,sqlResults:o}=e;for(let e of f(t)){let t=e,c=!1;j(e)&&(t="EXPLAIN (FORMAT JSON) ".concat(e),c=!0);try{let e=await fetch("".concat(l,"/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:t})}),u=await e.json();if(e.ok){if(c)try{let e=u.rows,t=Array.isArray(e)&&e.length>0?e[0]:void 0,a=t&&Object.values(t)[0];a&&i(a,n,r)}catch(e){}(!a||a.has(s))&&o.push("".concat(t,";\nResult: ").concat(JSON.stringify(u,null,2)))}else(!a||a.has(s))&&o.push("".concat(t,";\nError: ").concat(u.error))}catch(e){(!a||a.has(s))&&o.push("".concat(t,";\nError: ").concat(e instanceof Error?e.message:String(e)))}}}async function F(e){let{db:t,sql:n,combinationKey:a,sampleIndices:s,executionIndex:r,planFingerprintByCombination:l,handleExplainResult:i,sqlResults:o}=e;for(let e of f(n)){let n=e,c=!1;j(e)&&(n="EXPLAIN (FORMAT JSON) ".concat(e),c=!0);try{let e=await t.query(n);if(c)try{let t=e.rows,n=Array.isArray(t)&&t.length>0?t[0]:void 0,s=n&&Object.values(n)[0];s&&i(s,a,l)}catch(e){window.console.log("Explain JSON parse error:",e)}(!s||s.has(r))&&o.push("".concat(n,";\nResult: ").concat(JSON.stringify(e,null,2)))}catch(e){(!s||s.has(r))&&o.push("".concat(n,";\nError: ").concat(e instanceof Error?e.message:String(e)))}}}async function w(e){let t,{dim1Active:n,start0:a,end0:s,step0:r,start1:l,end1:i,step1:o,sqlQuery:c,preparation:u,proxyUrl:p="http://localhost:4000"}=e,d={},{onProgress:m}=e,_=[];if(u){let e=await E(u,async e=>{let t=await fetch("".concat(p,"/query"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sql:e})}),n=await t.json();return{ok:t.ok,data:n}});_=e.results,t=e.firstError}let g=R(n,a,s,r,l,i,o);m&&m(0,g);let{sampleIndices:h,sampled:x,sampleCount:S}=v(g),y=[];return await L({dim1Active:n,start0:a,end0:s,step0:r,start1:l,end1:i,step1:o,sqlQuery:c,callback:async e=>{let{sql:t,combinationKey:n,executionIndex:a}=e;await I({sql:t,combinationKey:n,sampleIndices:h,executionIndex:a,planFingerprintByCombination:d,proxyUrl:p,handleExplainResult:N,sqlResults:y})},onProgress:m,totalExecutions:g}),{preparationResults:_,sqlResults:y,planFingerprintByCombination:d,error:t,sampled:x,sampleCount:S,totalExecutions:g}}async function T(e){let t,{dim1Active:n,start0:a,end0:s,step0:r,start1:l,end1:i,step1:o,sqlQuery:c,preparation:u}=e,p=[],d=[],m={},_=new h.Eb,{onProgress:g}=e;if(u){let e=await E(u,async e=>{try{let t=await _.query(e);return{ok:!0,data:t}}catch(e){return{ok:!1,data:{error:e}}}});p.push(...e.results),t=e.firstError}let x=R(n,a,s,r,l,i,o);g&&g(0,x);let{sampleIndices:S,sampled:y,sampleCount:b}=v(x);return await L({dim1Active:n,start0:a,end0:s,step0:r,start1:l,end1:i,step1:o,sqlQuery:c,callback:async e=>{let{sql:t,combinationKey:n,executionIndex:a}=e;await F({db:_,sql:t,combinationKey:n,sampleIndices:S,executionIndex:a,planFingerprintByCombination:m,handleExplainResult:N,sqlResults:d})},onProgress:g,totalExecutions:x}),{preparationResults:p,sqlResults:d,planFingerprintByCombination:m,error:t,sampled:y,sampleCount:b,totalExecutions:x}}async function k(e){return"proxy"===e.backend?w(e):T(e)}let B=(0,g.default)(()=>Promise.all([n.e(776),n.e(699)]).then(n.bind(n,8699)),{loadableGenerated:{webpack:()=>[8699]},ssr:!1}),D=s.memo(e=>{let{open:t}=e;return(0,a.jsx)("span",{style:{display:"inline-block",transition:"transform 0.2s",transform:t?"rotate(90deg)":"rotate(0deg)",marginRight:6},children:"▶"})});D.displayName="Arrow";let O=s.memo(e=>{let{planFingerprintByCombination:t,dim0Name:n,dim1Name:s}=e;if(!t||0===Object.keys(t).length)return null;let r=Object.keys(t),l=new Set;r.forEach(e=>{let[,t]=e.split(",").map(Number);l.add(t)});let i=Math.max(0,Array.from(l).length-10),{series:o,options:c}=function(e,t,n){let a=Object.keys(e),s=new Set,r=new Set;a.forEach(e=>{let[t,n]=e.split(",").map(Number);s.add(t),r.add(n)});let l=Array.from(s).sort((e,t)=>e-t),i=Array.from(r).sort((e,t)=>e-t),o=i.map(()=>l.map(()=>0));return a.forEach(t=>{let[n,a]=t.split(",").map(Number),s=i.indexOf(a),r=l.indexOf(n);o[s][r]=e[t]}),{series:o.map((e,t)=>({name:"".concat(i[t]),data:e})),options:{chart:{type:"heatmap"},dataLabels:{enabled:!1},xaxis:{categories:l.map(e=>e.toString()),title:{text:t}},yaxis:i.length>1?{title:{text:n}}:{show:!1},grid:{padding:{left:5,right:5,bottom:5,top:5}},colors:["#008FFB"],title:{text:"Plan Fingerprint Heatmap"}}}}(t,n,s);return(0,a.jsx)("div",{style:{margin:"24px 0"},children:(0,a.jsx)(B,{options:c,series:o,type:"heatmap",height:350+15*i})})},(e,t)=>e.dim0Name===t.dim0Name&&e.dim1Name===t.dim1Name&&Object.keys(e.planFingerprintByCombination).length===Object.keys(t.planFingerprintByCombination).length&&Object.entries(e.planFingerprintByCombination).every(e=>{let[n,a]=e;return t.planFingerprintByCombination[n]===a}));O.displayName="Heatmap";let P=()=>x.size>0?(0,a.jsxs)("div",{className:_().planCount,children:["Number of different plans: ",x.size]}):null,M=e=>{let{planUsageCount:t,hasExecuted:n}=e,[r,l]=(0,s.useState)({}),i=e=>{l(t=>({...t,[e]:!t[e]}))};return x.size>0?(0,a.jsxs)("div",{className:_().planFingerprintMapBox,children:[(0,a.jsx)("h3",{children:(0,a.jsx)("strong",{children:"Plan Fingerprints"})}),(0,a.jsx)("ul",{className:_().planFingerprintMapList,children:[...x.entries()].map(e=>{let[s,l]=e;return(0,a.jsxs)("li",{className:_().planFingerprintMapItem,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer"},onClick:()=>i(l),children:[(0,a.jsx)("span",{style:{display:"inline-block",transition:"transform 0.2s",transform:r[l]?"rotate(90deg)":"rotate(0deg)",marginRight:6},children:"▶"}),(0,a.jsxs)("strong",{children:["Plan ",l]}),n&&(0,a.jsxs)("span",{className:_().planUsageCount,children:["(Used ",t[l]||0," times)"]})]}),(0,a.jsx)("pre",{className:_().planFingerprintMapPlan,children:s}),S.has(l)&&r[l]&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{marginTop:8,fontWeight:500},children:"Full Query Plan:"}),(0,a.jsx)("pre",{className:_().planFingerprintMapPlan,style:{whiteSpace:"pre-wrap",maxHeight:320,overflow:"auto"},children:S.get(l)})]})]},l)})})]}):null};function q(e){let{results:t=[],preparationResults:n=[],planFingerprintByCombination:r,dim0Name:l,dim1Name:i,sampled:o,sampleCount:c,totalExecutions:u}=e,[p,d]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),h=t.length>0||n.length>0,S={};Object.values(r).forEach(e=>{S[e]=(S[e]||0)+1});let y=!h&&0===x.size;return(0,a.jsxs)("div",{className:_().resultBox,children:[(0,a.jsx)(O,{planFingerprintByCombination:r,dim0Name:l,dim1Name:i}),(0,a.jsx)(P,{}),(0,a.jsx)(M,{planUsageCount:S,hasExecuted:h}),h?(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0,marginTop:24},children:[(0,a.jsxs)("div",{style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center"},onClick:()=>d(e=>!e),children:[(0,a.jsx)(D,{open:p}),(0,a.jsx)("strong",{className:_().resultTitle,children:"Detailed Preparation Steps"})]}),p&&(0,a.jsx)("div",{className:_().resultContent,children:n.length>0?(0,a.jsx)("ul",{className:_().resultList,children:n.map((e,t)=>(0,a.jsx)("li",{className:_().resultItem,children:(0,a.jsx)("pre",{className:_().preparation,children:e})},t))}):(0,a.jsx)("span",{className:_().noPreparationResult,children:"No preparation steps"})}),(0,a.jsxs)("div",{style:{cursor:"pointer",userSelect:"none",display:"flex",alignItems:"center",marginTop:8},onClick:()=>g(e=>!e),children:[(0,a.jsx)(D,{open:m}),(0,a.jsx)("strong",{className:_().resultTitle,children:"Detailed SQL Queries"}),o&&(0,a.jsxs)("span",{className:_().planUsageCount,children:["(Sampled ",c," of ",u,")"]})]}),m&&(0,a.jsx)("div",{className:_().resultContent,children:0===t.length?(0,a.jsx)("span",{className:_().noResult,children:"No result"}):(0,a.jsx)("ul",{className:_().resultList,children:t.map((e,t)=>(0,a.jsx)("li",{className:_().resultItem,children:(0,a.jsx)("span",{className:_().sql,children:e})},t))})})]}):y&&(0,a.jsx)("div",{className:_().noResult,style:{textAlign:"center"},children:"Please execute a query"})]})}M.displayName="PlanFingerprintMapList";var A=n(8334),Q=n.n(A),G=n(2789),U=n.n(G);let H=e=>{let{value:t,onChange:n,proxyUrl:r,onProxyUrlChange:l}=e,[i,o]=(0,s.useState)(null),[c,u]=(0,s.useState)("");async function p(){if(!r)return;o("loading"),u("");let e=new AbortController,t=setTimeout(()=>e.abort(),5e3);try{let n=await fetch("".concat(r.replace(/\/$/,""),"/ping"),{signal:e.signal});if(clearTimeout(t),n.ok){let e=await n.json();e.ok?(o("success"),u("Connection successful!")):(o("error"),u(e.error?"Server error: ".concat(e.error):"Unknown error"))}else o("error"),u("HTTP error: ".concat(n.status))}catch(e){clearTimeout(t),e instanceof DOMException&&"AbortError"===e.name?(o("error"),u("Connection timed out (5s)")):e instanceof Error?(o("error"),u(e.message)):(o("error"),u(String(e)))}}return(0,a.jsxs)("fieldset",{className:U().selectorBox,children:[(0,a.jsx)("legend",{className:U().dimensionLegend,style:{marginBottom:0},children:"Database Backend"}),(0,a.jsxs)("div",{className:U().selectorRow,children:[(0,a.jsx)("div",{className:U().selectorRowInner,children:(0,a.jsxs)("select",{id:"db-backend-select",className:U().selectorSelect,value:t,onChange:e=>n(e.target.value),children:[(0,a.jsx)("option",{value:"pglite",children:"Built-in (PGLite, in-browser)"}),(0,a.jsx)("option",{value:"proxy",children:"Server Proxy (real PostgreSQL)"})]})}),"proxy"===t&&l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"text",className:U().inputProxyUrl,placeholder:"Proxy URL (e.g. http://localhost:4000)",value:r||"",onChange:e=>l(e.target.value)}),(0,a.jsxs)("div",{className:U().buttonTestRow,children:[(0,a.jsx)("button",{type:"button",className:U().buttonTest,onClick:p,disabled:!r||"loading"===i,children:"loading"===i?"Testing...":"Test Connection"}),i&&(0,a.jsx)("div",{className:U().testStatusBox+("success"===i?" "+U().testStatusSuccess:"error"===i?" "+U().testStatusError:""),children:c})]})]})]})]})};var J=n(1890);function V(){let e="1"===J.env.NEXT_PUBLIC_DEVFULL,[t,n]=(0,s.useState)("pglite"),[r,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(0),[m,_]=(0,s.useState)(5e4),[g,h]=(0,s.useState)(0),[x,S]=(0,s.useState)(10),[y,N]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[v,E]=(0,s.useState)(!0),[R,C]=(0,s.useState)(!0),[L,I]=(0,s.useState)(!0),[F,w]=(0,s.useState)(!0),[T,B]=(0,s.useState)(""),[D,O]=(0,s.useState)(1e3),[P,M]=(0,s.useState)(1),[A,G]=(0,s.useState)(""),[U,V]=(0,s.useState)(!1),[W,X]=(0,s.useState)({}),[Z,z]=(0,s.useState)(void 0),[Y,$]=(0,s.useState)(null),K="Dimension 0",ee="Dimension 1",[et,en]=(0,s.useState)(K),[ea,es]=(0,s.useState)(ee),[er,el]=(0,s.useState)(!1),[ei,eo]=(0,s.useState)(void 0),[ec,eu]=(0,s.useState)(void 0),[ep,ed]=(0,s.useState)("http://localhost:4000");async function em(){var e;V(!0),$(null),X({}),b(),z(void 0);let n=await k({dim1Active:r,start0:o,end0:m,step0:D,start1:g,end1:x,step1:P,sqlQuery:T,preparation:A,backend:t,proxyUrl:ep,onProgress:(e,t)=>$({current:e,total:t})});j(n.preparationResults),N(n.sqlResults),X(n.planFingerprintByCombination),z(n.error),el(null!=(e=n.sampled)&&e),eo(n.sampleCount),eu(n.totalExecutions),V(!1),$(null)}let e_=()=>{N([]),j([]),G(""),B(""),X({}),b(),l(!1),c(0),_(5e4),O(1e3),en(K),h(0),S(10),M(1),es(ee),z(void 0)};return(0,a.jsxs)("div",{className:Q().container,children:[(0,a.jsx)("h1",{className:Q().heading,children:"Query Plan Explorer"}),e&&(0,a.jsx)(H,{value:t,onChange:n,proxyUrl:ep,onProxyUrlChange:ed}),(0,a.jsx)(i,{label:"Dimension 0",start:o,end:m,setStart:c,setEnd:_,startValid:v,setStartValid:E,endValid:R,setEndValid:C,step:D,setStep:O,description:et,setDescription:en}),r?(0,a.jsx)(i,{label:"Dimension 1",start:g,end:x,setStart:h,setEnd:S,startValid:L,setStartValid:I,endValid:F,setEndValid:w,step:P,setStep:M,description:ea,setDescription:es,onRemove:()=>l(!1)}):(0,a.jsx)("button",{onClick:()=>l(!0),className:Q().buttonAdd,children:"+ Add Dimension 1"}),(0,a.jsx)("div",{style:{marginBottom:24},children:(0,a.jsx)(d,{value:T,onChange:B,dim1Active:r,preparationValue:A,onPreparationChange:G})}),(0,a.jsxs)("div",{className:Q().buttonRow,children:[(0,a.jsxs)("div",{className:Q().demoButtonGroup,children:[(0,a.jsx)("button",{onClick:()=>{e_(),G(u),B(p),O(1e3),en("WHERE key > X"),es(ee)},className:Q().buttonDemo,title:"Load Demo Query 1",children:"Query 1"}),(0,a.jsx)("button",{onClick:()=>{e_(),G(u),l(!0),h(0),S(8),M(.25),O(1e3),B("SET random_page_cost = %%DIMENSION1%%;\n"+p),en("WHERE key > X"),es("random_page_cost")},className:Q().buttonDemo,title:"Load Demo Query 2",children:"Query 2"}),(0,a.jsx)("button",{onClick:()=>{e_(),G(u),l(!0),h(0),S(8),M(.25),O(1e3),B("SET random_page_cost = %%DIMENSION1%%;\nSELECT * FROM data d1 LEFT JOIN data d2 ON (d1.key = d2.key) WHERE d1.key > %%DIMENSION0%%;"),en("WHERE key > X"),es("random_page_cost")},className:Q().buttonDemo,title:"Load Demo Query 3",children:"Query 3"})]}),(0,a.jsxs)("div",{className:Q().actionButtonGroup,children:[(0,a.jsx)("button",{onClick:em,className:Q().buttonPrimary,disabled:U||!v||!R||r&&(!L||!F)||""===T.trim(),children:U?(0,a.jsx)("span",{className:Q().spinner,"aria-label":"Loading"}):"Execute"}),(0,a.jsx)("button",{onClick:e_,className:Q().buttonClear,children:"Clear"})]})]}),Z&&(0,a.jsxs)("div",{style:{color:"#dc2626",background:"#fff0f0",border:"1.5px solid #ef4444",borderRadius:8,padding:"12px 18px",marginBottom:18,fontWeight:600},children:["Error: ",Z]}),U&&Y&&(0,a.jsxs)("div",{style:{margin:"1em 0"},children:[(0,a.jsx)("progress",{value:Y.current,max:Y.total,style:{width:"100%"}}),(0,a.jsxs)("div",{style:{textAlign:"center",fontSize:"0.9em"},children:["Query ",Y.current," of ",Y.total]})]}),(0,a.jsx)(q,{results:y,preparationResults:f,planFingerprintByCombination:W,dim0Name:et,dim1Name:ea,sampled:er,sampleCount:ei,totalExecutions:ec})]})}},3681:(e,t,n)=>{Promise.resolve().then(n.bind(n,2836))},3876:e=>{e.exports={resultBox:"ResultList_resultBox__7VdAH",resultTitle:"ResultList_resultTitle__pEBQd",resultContent:"ResultList_resultContent__e0zMT",resultList:"ResultList_resultList__l8npF",resultItem:"ResultList_resultItem__khMHP",sql:"ResultList_sql__LOTVk",noResult:"ResultList_noResult__Si0zi",noPreparationResult:"ResultList_noPreparationResult___C8rk",preparation:"ResultList_preparation__7rt90",planCount:"ResultList_planCount__Fm79l",collapseButton:"ResultList_collapseButton__aFGQg",planFingerprintMapBox:"ResultList_planFingerprintMapBox__787t6",planFingerprintMapList:"ResultList_planFingerprintMapList__T7Zm0",planFingerprintMapItem:"ResultList_planFingerprintMapItem__HPX0W",planFingerprintMapPlan:"ResultList_planFingerprintMapPlan__ZYZRO",planUsageCount:"ResultList_planUsageCount__h9DTM"}},6677:e=>{e.exports={intervalRow:"IntervalSelector_intervalRow__vhTVf",inputLabel:"IntervalSelector_inputLabel__Ju7_S",inputField:"IntervalSelector_inputField__ANvAB",inputFieldInvalid:"IntervalSelector_inputFieldInvalid__jtJTc",intervalInfo:"IntervalSelector_intervalInfo__JbWZa",dimensionGroup:"IntervalSelector_dimensionGroup__CGi_0",dimensionLegend:"IntervalSelector_dimensionLegend__Irkaf",removeButton:"IntervalSelector_removeButton__CQ_Go"}},8334:e=>{e.exports={container:"page_container__aoG4z",heading:"page_heading__ZPgh_",resultBox:"page_resultBox__evpxF",resultTitle:"page_resultTitle__nINtY",resultList:"page_resultList__ZBU6J",resultItem:"page_resultItem__jRIk2",buttonPrimary:"page_buttonPrimary__QtCGm",buttonAdd:"page_buttonAdd__2sSdl",buttonRemove:"page_buttonRemove__HiRAG",buttonClear:"page_buttonClear__KywYs",buttonReset:"page_buttonReset__fgRUt",buttonDemo:"page_buttonDemo__N_0nX",noResult:"page_noResult___U4Gg",spinner:"page_spinner__1WnEQ",spin:"page_spin__W_8_q",buttonRow:"page_buttonRow__iVZ1w",demoButtonGroup:"page_demoButtonGroup__BaAZG",actionButtonGroup:"page_actionButtonGroup__y6nC3"}}},e=>{var t=t=>e(e.s=t);e.O(0,[554,210,774,441,684,358],()=>t(3681)),_N_E=e.O()}]);